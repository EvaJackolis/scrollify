{"version":3,"file":null,"sources":["../src/transform.js","../src/matrix.js","../src/scrollify.js"],"sourcesContent":["/**\n * Feature detection: CSS transforms\n * @type {Boolean}\n */\n\nconst dummy = document.createElement('div');\nconst transform = ['transform', 'webkitTransform', 'MozTransform', 'OTransform', 'msTransform'].find((t) => {\n  // return (document.body.style[t] !== undefined);   // if DOM is not yet ready, let's do:\n  return (dummy.style[t] !== undefined);\n});\n\nexport default transform;\n","/*\nThe MIT License (MIT)\n\nCopyright (c) 2015 Daniel Lundin\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n'use strict';\n\nfunction assignedMatrixMultiplication(a, b, res) {\n  // Unrolled loop\n  res[0] = a[0] * b[0] + a[1] * b[4] + a[2] * b[8] + a[3] * b[12];\n  res[1] = a[0] * b[1] + a[1] * b[5] + a[2] * b[9] + a[3] * b[13];\n  res[2] = a[0] * b[2] + a[1] * b[6] + a[2] * b[10] + a[3] * b[14];\n  res[3] = a[0] * b[3] + a[1] * b[7] + a[2] * b[11] + a[3] * b[15];\n\n  res[4] = a[4] * b[0] + a[5] * b[4] + a[6] * b[8] + a[7] * b[12];\n  res[5] = a[4] * b[1] + a[5] * b[5] + a[6] * b[9] + a[7] * b[13];\n  res[6] = a[4] * b[2] + a[5] * b[6] + a[6] * b[10] + a[7] * b[14];\n  res[7] = a[4] * b[3] + a[5] * b[7] + a[6] * b[11] + a[7] * b[15];\n\n  res[8] = a[8] * b[0] + a[9] * b[4] + a[10] * b[8] + a[11] * b[12];\n  res[9] = a[8] * b[1] + a[9] * b[5] + a[10] * b[9] + a[11] * b[13];\n  res[10] = a[8] * b[2] + a[9] * b[6] + a[10] * b[10] + a[11] * b[14];\n  res[11] = a[8] * b[3] + a[9] * b[7] + a[10] * b[11] + a[11] * b[15];\n\n  res[12] = a[12] * b[0] + a[13] * b[4] + a[14] * b[8] + a[15] * b[12];\n  res[13] = a[12] * b[1] + a[13] * b[5] + a[14] * b[9] + a[15] * b[13];\n  res[14] = a[12] * b[2] + a[13] * b[6] + a[14] * b[10] + a[15] * b[14];\n  res[15] = a[12] * b[3] + a[13] * b[7] + a[14] * b[11] + a[15] * b[15];\n\n  return res;\n}\n\nfunction assignTranslate(matrix, x, y, z) {\n  matrix[0] = 1;\n  matrix[1] = 0;\n  matrix[2] = 0;\n  matrix[3] = 0;\n  matrix[4] = 0;\n  matrix[5] = 1;\n  matrix[6] = 0;\n  matrix[7] = 0;\n  matrix[8] = 0;\n  matrix[9] = 0;\n  matrix[10] = 1;\n  matrix[11] = 0;\n  matrix[12] = x;\n  matrix[13] = y;\n  matrix[14] = z;\n  matrix[15] = 1;\n}\n\nfunction assignRotateX(matrix, rad) {\n  matrix[0] = 1;\n  matrix[1] = 0;\n  matrix[2] = 0;\n  matrix[3] = 0;\n  matrix[4] = 0;\n  matrix[5] = Math.cos(rad);\n  matrix[6] = -Math.sin(rad);\n  matrix[7] = 0;\n  matrix[8] = 0;\n  matrix[9] = Math.sin(rad);\n  matrix[10] = Math.cos(rad);\n  matrix[11] = 0;\n  matrix[12] = 0;\n  matrix[13] = 0;\n  matrix[14] = 0;\n  matrix[15] = 1;\n}\n\n\nvar assignRotateY = function(matrix, rad) {\n  matrix[0] = Math.cos(rad);\n  matrix[1] = 0;\n  matrix[2] = Math.sin(rad);\n  matrix[3] = 0;\n  matrix[4] = 0;\n  matrix[5] = 1;\n  matrix[6] = 0;\n  matrix[7] = 0;\n  matrix[8] = -Math.sin(rad);\n  matrix[9] = 0;\n  matrix[10] = Math.cos(rad);\n  matrix[11] = 0;\n  matrix[12] = 0;\n  matrix[13] = 0;\n  matrix[14] = 0;\n  matrix[15] = 1;\n};\n\nfunction assignRotateZ(matrix, rad) {\n  matrix[0] = Math.cos(rad);\n  matrix[1] = -Math.sin(rad);\n  matrix[2] = 0;\n  matrix[3] = 0;\n  matrix[4] = Math.sin(rad);\n  matrix[5] = Math.cos(rad);\n  matrix[6] = 0;\n  matrix[7] = 0;\n  matrix[8] = 0;\n  matrix[9] = 0;\n  matrix[10] = 1;\n  matrix[11] = 0;\n  matrix[12] = 0;\n  matrix[13] = 0;\n  matrix[14] = 0;\n  matrix[15] = 1;\n}\n\nfunction assignSkew(matrix, ax, ay) {\n  matrix[0] = 1;\n  matrix[1] = Math.tan(ax);\n  matrix[2] = 0;\n  matrix[3] = 0;\n  matrix[4] = Math.tan(ay);\n  matrix[5] = 1;\n  matrix[6] = 0;\n  matrix[7] = 0;\n  matrix[8] = 0;\n  matrix[9] = 0;\n  matrix[10] = 1;\n  matrix[11] = 0;\n  matrix[12] = 0;\n  matrix[13] = 0;\n  matrix[14] = 0;\n  matrix[15] = 1;\n}\n\n\nfunction assignScale(matrix, x, y) {\n  matrix[0] = x;\n  matrix[1] = 0;\n  matrix[2] = 0;\n  matrix[3] = 0;\n  matrix[4] = 0;\n  matrix[5] = y;\n  matrix[6] = 0;\n  matrix[7] = 0;\n  matrix[8] = 0;\n  matrix[9] = 0;\n  matrix[10] = 1;\n  matrix[11] = 0;\n  matrix[12] = 0;\n  matrix[13] = 0;\n  matrix[14] = 0;\n  matrix[15] = 1;\n}\n\nfunction assignIdentity(matrix) {\n  matrix[0] = 1;\n  matrix[1] = 0;\n  matrix[2] = 0;\n  matrix[3] = 0;\n  matrix[4] = 0;\n  matrix[5] = 1;\n  matrix[6] = 0;\n  matrix[7] = 0;\n  matrix[8] = 0;\n  matrix[9] = 0;\n  matrix[10] = 1;\n  matrix[11] = 0;\n  matrix[12] = 0;\n  matrix[13] = 0;\n  matrix[14] = 0;\n  matrix[15] = 1;\n}\n\nfunction copyArray(a, b) {\n  b[0] = a[0];\n  b[1] = a[1];\n  b[2] = a[2];\n  b[3] = a[3];\n  b[4] = a[4];\n  b[5] = a[5];\n  b[6] = a[6];\n  b[7] = a[7];\n  b[8] = a[8];\n  b[9] = a[9];\n  b[10] = a[10];\n  b[11] = a[11];\n  b[12] = a[12];\n  b[13] = a[13];\n  b[14] = a[14];\n  b[15] = a[15];\n}\n\nfunction createMatrix() {\n    var data = new Float32Array(16);\n    var a = new Float32Array(16);\n    var b = new Float32Array(16);\n    assignIdentity(data);\n\n    return {\n      data: data,\n\n      asCSS: function() {\n        var css = 'matrix3d(';\n        for (var i = 0; i < 15; ++i) {\n          if (Math.abs(data[i]) < 0.0001) {\n            css += '0,';\n           } else {\n             css += data[i].toFixed(10) + ',';\n           }\n        }\n        if (Math.abs(data[15]) < 0.0001) {\n          css += '0)';\n        } else {\n          css += data[15].toFixed(10) + ')';\n        }\n        return css;\n      },\n\n      clear: function() {\n        assignIdentity(data);\n      },\n\n      translate: function(x, y, z) {\n        copyArray(data, a);\n        assignTranslate(b, x, y, z);\n        assignedMatrixMultiplication(a, b, data);\n        return this;\n      },\n\n      rotateX: function(radians) {\n        copyArray(data, a);\n        assignRotateX(b, radians);\n        assignedMatrixMultiplication(a, b, data);\n        return this;\n      },\n\n      rotateY: function(radians) {\n        copyArray(data, a);\n        assignRotateY(b, radians);\n        assignedMatrixMultiplication(a, b, data);\n        return this;\n      },\n\n      rotateZ: function(radians) {\n        copyArray(data, a);\n        assignRotateZ(b, radians);\n        assignedMatrixMultiplication(a, b, data);\n        return this;\n      },\n\n      scale: function(x, y) {\n        copyArray(data, a);\n        assignScale(b, x, y);\n        assignedMatrixMultiplication(a, b, data);\n        return this;\n      },\n\n    skew: function(ax, ay) {\n      copyArray(data, a);\n      assignSkew(b, ax, ay);\n      assignedMatrixMultiplication(a, b, data);\n      return this;\n    }\n  };\n}\n\n\n// module.exports = createMatrix;\nexport default createMatrix;\n","/*\n * scrollify\n * https://github.com/apathetic/scrollify\n *\n * Copyright (c) 2016 Wes Hatch\n * Licensed under the MIT license.\n *\n */\n\n/*eslint max-len: [\"error\", 120]*/\n/*global document requestAnimationFrame console HTMLElement*/\n\n// TODO add weakmap support for public / private methods\n\nimport transform from './transform';\nimport createMatrix from './matrix';\n\n\n/**\n * The Scrollify Class\n */\nexport default class Scrollify {\n\n  /**\n   * @constructor\n   * @param {HTMLElement|String} element: The element to Scrollify.\n   */\n  constructor(element) {\n    if (element instanceof HTMLElement == false) { element = document.querySelector(element); }\n    if (!element || !transform) { return this.active = false; }\n    // if (!transform) { throw 'Scrollify [error]: transforms not supported'; }\n    // if (!element) { throw 'Scrollify [error]: could not find element'; }\n\n    this.element = element;\n    this.ticking = false;\n    this.scenes = [];\n    this.scroll = window.scrollY || window.pageYOffset;\n    this.active = true;\n    this.matrix = createMatrix();\n    this.transforms = {\n      scale: [1,1],\n      rotation: [0,0,0],\n      position: [0,0,0]\n      // transformOrigin: [],\n      // skew: [],\n    };\n\n    window.addEventListener('scroll', (e) => this.onScroll(e));\n    window.addEventListener('resize', (e) => this.onResize(e));\n  }\n\n  /**\n   * Add a new Scene to the Scrollify object. Scene information includes when\n   * to start applying an effect and for how long.\n   * @param  {Object} opts: Various options to apply to the new Scene:\n   *\n   *   start: (required) When to start the effect. It is a 0 - 1 value\n   *          representing the percentage of the viewport (eg. 0.5).\n   *          Any effects in the Scene will begin when the trigger element\n   *          crosses this threshold.\n   *\n   *   duration: The length of the effect, in pixels. Scrollify will\n   *          interpolate that into value into a \"progress\" variable, bounded\n   *          by 0 - 1. If not supplied, the default value is the height of the\n   *          viewport + element height, meaning the effect will last for as\n   *          long as the element is visible.\n   *\n   *   trigger: If supplied, Scrollify will use this element's position to\n   *          start any Scene effects. If not supplied, the default is to use\n   *          the element itself as a trigger.\n   *\n   *   easing: Ease in/out of an effect. Any value from Robert Penner's easing\n   *          functions is valid.\n   *\n   * @return {void}\n   */\n  addScene(opts) {\n    let triggerPos = opts.start || 0;\n    let duration = opts.duration || window.innerHeight + this.element.offsetHeight;\n    let easing = opts.easing || false;\n    let effects = opts.effects || [];\n    let trigger = opts.trigger ? opts.trigger instanceof HTMLElement ? opts.trigger : document.querySelector(opts.trigger) : this.element;\n    let applyTransform = opts.applyTransform !== undefined ? opts.applyTransform : true;   // opt out rather than opt in\n    let scene = {\n      trigger: trigger,\n      triggerPos: 1 - triggerPos,\n      duration: duration,\n      easing: easing,\n      applyTransform: applyTransform,\n      effects: []\n    };\n\n    // scene.active = this.scroll > this.calculateStart(scene); // calculate any transformations if the scene has already passed.\n\n    this.calculateStart(scene);\n    scene.state = (this.scroll > this.start) ? (this.scroll > this.start+duration) ? 'after' : 'active' : 'before';\n\n    effects.map((effect) => {\n      this.addEffect(effect.name, effect.options, scene);\n    });\n\n    this.updateScene(scene);\n    this.scenes.push(scene);\n\n    return this;\n  }\n\n  /**\n   * Update each scene.\n   * @param  {Object} scene: The scene to update.\n   * @return {void}\n   */\n  updateScene(scene) {\n    this.calculateStart(scene);\n    this.calculate(scene);\n  }\n\n  /**\n   * Add a particular transformation to a scene.\n   * @param  {Function} effect: The transformation function to apply.\n   * @param  {Object} options: Any transformation options.\n   * @param  {Object} scene: Object containing start and duration information.\n   * @return {void}\n   */\n  addEffect(effect, options = {}, scene) {\n    let element = this.element;\n    let transforms = this.transforms;\n\n    if (!scene) {\n      if (this.scenes.length) {\n        // use the most recently added scene\n        scene = this.scenes[this.scenes.length - 1];\n      } else {\n        // or if no scene (ie \"addEffect\" was called directly on Scrollify), set up a default one\n        return this.addScene({\n          'effects': [{'name': effect, 'options': options}]\n        });\n      }\n    }\n\n    let curry = (fn, options) => {\n      return function() {       // NOTE: don't use => function here as we do NOT want to bind \"this\"\n        let context = {\n          'options': options,\n          'element': element,\n          'transforms': transforms\n        };\n\n        fn.call(context, this); // eslint-disable-line\n      };\n    };\n\n    scene.effects.push(curry(effect, options));\n\n    return this;\n  }\n\n  /**\n   * Calculate the start point of each scene.\n   * @param  {[type]} scene A Scrollify Scene object.\n   * @return {Integer} The start position of the Scene, in pixels.\n   */\n  calculateStart(scene) {\n    let trigger = scene.trigger;\n    let triggerPos = scene.triggerPos;\n    let top = 0;\n\n    do {\n      top += trigger.offsetTop || 0;\n      trigger = trigger.offsetParent;\n    } while(trigger);\n    // top = trigger.getBoundingClientRect().top + (window.scrollY || window.pageYOffset);\n\n    // return Math.max(0, top - triggerPos * window.innerHeight); // (can be negative...?)\n    scene.start = Math.max(0, top - triggerPos * window.innerHeight);\n  }\n\n  /**\n   * onScroll Handler\n   * @return {void}\n   */\n  onScroll() {\n    if (!this.active) { return; }\n    this.scroll = window.scrollY || window.pageYOffset;\n\n    if (!this.ticking) {\n      window.requestAnimationFrame(this.update.bind(this));\n      this.ticking = true;\n    }\n  }\n\n  /**\n   * onResize Handler\n   * @return {void}\n   */\n  onResize() {\n    this.scenes.forEach(this.updateScene, this);\n  }\n\n  /**\n   * Update the transformations for every scene.\n   * @return {void}\n   */\n  update() {\n    this.scenes.forEach(this.calculate, this);\n    this.ticking = false;\n  }\n\n  /**\n   * Calculate the transformations for each scene.\n   * @param  {Object} scene: An Object containing start and duration\n   *                         information as well as an Array of\n   *                         transformations to apply.\n   * @return {void}\n   */\n  calculate(scene) {\n    let start = scene.start;\n    let duration = scene.duration;\n    let scroll = this.scroll;\n    let progress;\n    let matrix;\n\n    // after end\n    if (scroll - start > duration) {\n      if (scene.state !== 'after') {    // do one final iteration\n        scene.state = 'after';\n        progress = 1;\n      } else {\n        return;\n      }\n\n    // before start\n    } else if (scroll - start < 0) {\n      if (scene.state !== 'before') {    // do one final iteration\n        scene.state = 'before';\n        progress = 0;\n      } else {\n        return;\n      }\n\n    // active\n    } else {\n      scene.state = 'active';\n      if (scene.easing) { //            start, from, to, end\n        progress = scene.easing(scroll - start, 0, 1, duration);\n      } else {\n        progress = (scroll - start) / duration;\n      }\n    }\n\n    // cycle through any registered transformations\n    scene.effects.forEach((effect) => {\n      effect.call(progress);\n    });\n\n    if (scene.applyTransform) {\n      // transmogrify all applied transformations into a single matrix, and apply\n      matrix = this.updateMatrix();\n      this.element.style[transform] = matrix.asCSS();\n    }\n  }\n\n  /**\n   * Loop through all the element's transformation data and calculates a matrix representing it.\n   * @return {Matrix} Ye olde Matrix\n   */\n  updateMatrix() {\n    let t = this.transforms;\n    let m = this.matrix;\n\n    m.clear();\n\n    // here we adjust the transformOrigin ...\n    if (t.transformOrigin) {\n      m.translate(-t.transformOrigin[0], -t.transformOrigin[1], -t.transformOrigin[2]);\n    }\n\n    if (t.scale) {\n      m.scale(t.scale[0], t.scale[1]);\n    }\n\n    if (t.skew) {\n      m.skew(t.skew[0], t.skew[1]);\n    }\n\n    if (t.rotation) {\n      m.rotateX(t.rotation[0]);\n      m.rotateY(t.rotation[1]);\n      m.rotateZ(t.rotation[2]);\n    }\n\n    if (t.position) {\n      m.translate(t.position[0], t.position[1], t.position[2]);\n    }\n\n    // -----------------------------------------------------\n    // IF we wished to perform rotation AFTER skew / position / etc, we could do it here.\n    // The ordering is important, and has an effect.\n\n    // if (t.rotationPost) {\n    //   m.rotateX(t.rotationPost[0]);\n    //   m.rotateY(t.rotationPost[1]);\n    //   m.rotateZ(t.rotationPost[2]);\n    // }\n\n    // if (t.scalePost) {\n    //   m.scale(t.scalePost[0], t.scalePost[1]);\n    // }\n    // -----------------------------------------------------\n\n\n    // ... and here we put it back. (This duplication is not a mistake).\n    if (t.transformOrigin) {\n      m.translate(t.transformOrigin[0], t.transformOrigin[1], t.transformOrigin[2]);\n    }\n\n    return m;\n  }\n\n  /**\n   * Disable Scrollify-ing. Perhaps for performance reasons / mobile devices.\n   * @return {void}\n   */\n  disable() {\n    this.active = false;\n  }\n}\n"],"names":[],"mappings":"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"}