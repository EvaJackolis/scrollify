var scrollify=function(){"use strict";function t(t,e,n){return n[0]=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],n[1]=t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],n[2]=t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],n[3]=t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15],n[4]=t[4]*e[0]+t[5]*e[4]+t[6]*e[8]+t[7]*e[12],n[5]=t[4]*e[1]+t[5]*e[5]+t[6]*e[9]+t[7]*e[13],n[6]=t[4]*e[2]+t[5]*e[6]+t[6]*e[10]+t[7]*e[14],n[7]=t[4]*e[3]+t[5]*e[7]+t[6]*e[11]+t[7]*e[15],n[8]=t[8]*e[0]+t[9]*e[4]+t[10]*e[8]+t[11]*e[12],n[9]=t[8]*e[1]+t[9]*e[5]+t[10]*e[9]+t[11]*e[13],n[10]=t[8]*e[2]+t[9]*e[6]+t[10]*e[10]+t[11]*e[14],n[11]=t[8]*e[3]+t[9]*e[7]+t[10]*e[11]+t[11]*e[15],n[12]=t[12]*e[0]+t[13]*e[4]+t[14]*e[8]+t[15]*e[12],n[13]=t[12]*e[1]+t[13]*e[5]+t[14]*e[9]+t[15]*e[13],n[14]=t[12]*e[2]+t[13]*e[6]+t[14]*e[10]+t[15]*e[14],n[15]=t[12]*e[3]+t[13]*e[7]+t[14]*e[11]+t[15]*e[15],n}function e(t,e,n,i){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e,t[13]=n,t[14]=i,t[15]=1}function n(t,e){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=Math.cos(e),t[6]=-Math.sin(e),t[7]=0,t[8]=0,t[9]=Math.sin(e),t[10]=Math.cos(e),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function i(t,e){t[0]=Math.cos(e),t[1]=-Math.sin(e),t[2]=0,t[3]=0,t[4]=Math.sin(e),t[5]=Math.cos(e),t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function r(t,e,n){t[0]=1,t[1]=Math.tan(e),t[2]=0,t[3]=0,t[4]=Math.tan(n),t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function a(t,e,n){t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function s(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function o(t,e){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]}function c(){var c=new Float32Array(16),f=new Float32Array(16),l=new Float32Array(16);return s(c),{data:c,asCSS:function(){for(var t="matrix3d(",e=0;e<15;++e)t+=Math.abs(c[e])<1e-4?"0,":c[e].toFixed(10)+",";return t+=Math.abs(c[15])<1e-4?"0)":c[15].toFixed(10)+")"},clear:function(){s(c)},translate:function(n,i,r){return o(c,f),e(l,n,i,r),t(f,l,c),this},rotateX:function(e){return o(c,f),n(l,e),t(f,l,c),this},rotateY:function(e){return o(c,f),u(l,e),t(f,l,c),this},rotateZ:function(e){return o(c,f),i(l,e),t(f,l,c),this},scale:function(e,n){return o(c,f),a(l,e,n),t(f,l,c),this},skew:function(e,n){return o(c,f),r(l,e,n),t(f,l,c),this}}}var f=["transform","webkitTransform","MozTransform","OTransform","msTransform"].find(function(t){return void 0!==document.body.style[t]}),u=function(t,e){t[0]=Math.cos(e),t[1]=0,t[2]=Math.sin(e),t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=-Math.sin(e),t[9]=0,t[10]=Math.cos(e),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},l=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),d=function(){function t(e){var n=this;return l(this,t),e instanceof HTMLElement==0&&(e=document.querySelector(e)),e&&f?(this.element=e,this.ticking=!1,this.scenes=[],this.scroll=window.scrollY||window.pageYOffset,this.active=!0,this.matrix=c(),this.transforms={scale:[1,1],rotation:[0,0,0],position:[0,0,0]},window.addEventListener("scroll",function(t){return n.onScroll(t)}),void window.addEventListener("resize",function(t){return n.onResize(t)})):this.active=!1}return h(t,[{key:"addScene",value:function(t){var e=this,n=t.start||0,i=t.duration||window.innerHeight+this.element.offsetHeight,r=t.easing||!1,a=t.effects||[],s=t.trigger?t.trigger instanceof HTMLElement?t.trigger:document.querySelector(t.trigger):this.element,o=void 0===t.applyTransform||t.applyTransform,c={trigger:s,triggerPos:1-n,duration:i,easing:r,applyTransform:o,effects:[]};return this.calculateStart(c),c.state=this.scroll>this.start?this.scroll>this.start+i?"after":"active":"before",a.map(function(t){e.addEffect(t.name,t.options,c)}),this.updateScene(c),this.scenes.push(c),this}},{key:"updateScene",value:function(t){this.calculateStart(t),this.calculate(t)}},{key:"addEffect",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments[2],i=this.element,r=this.transforms;if(!n){if(!this.scenes.length)return this.addScene({effects:[{name:t,options:e}]});n=this.scenes[this.scenes.length-1]}var a=function(t,e){return function(){var n={options:e,element:i,transforms:r};t.call(n,this)}};return n.effects.push(a(t,e)),this}},{key:"calculateStart",value:function(t){var e=t.trigger,n=t.triggerPos,i=0;do i+=e.offsetTop||0,e=e.offsetParent;while(e);t.start=Math.max(0,i-n*window.innerHeight)}},{key:"onScroll",value:function(){this.active&&(this.scroll=window.scrollY||window.pageYOffset,this.ticking||(window.requestAnimationFrame(this.update.bind(this)),this.ticking=!0))}},{key:"onResize",value:function(){this.scenes.forEach(this.updateScene,this)}},{key:"update",value:function(){this.scenes.forEach(this.calculate,this),this.ticking=!1}},{key:"calculate",value:function(t){var e=t.start,n=t.duration,i=this.scroll,r=void 0,a=void 0;if(i-e>n){if("after"===t.state)return;t.state="after",r=1}else if(i-e<0){if("before"===t.state)return;t.state="before",r=0}else t.state="active",r=t.easing?t.easing(i-e,0,1,n):(i-e)/n;t.effects.forEach(function(t){t.call(r)}),t.applyTransform&&(a=this.updateMatrix(),this.element.style[f]=a.asCSS())}},{key:"updateMatrix",value:function(){var t=this.transforms,e=this.matrix;return e.clear(),t.transformOrigin&&e.translate(-t.transformOrigin[0],-t.transformOrigin[1],-t.transformOrigin[2]),t.scale&&e.scale(t.scale[0],t.scale[1]),t.skew&&e.skew(t.skew[0],t.skew[1]),t.rotation&&(e.rotateX(t.rotation[0]),e.rotateY(t.rotation[1]),e.rotateZ(t.rotation[2])),t.position&&e.translate(t.position[0],t.position[1],t.position[2]),t.transformOrigin&&e.translate(t.transformOrigin[0],t.transformOrigin[1],t.transformOrigin[2]),e}},{key:"disable",value:function(){this.active=!1}}]),t}();return d}();